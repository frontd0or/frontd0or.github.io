<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>frontd0or is locked...</title>
  <link href="https://fonts.googleapis.com/css2?family=Share+Tech+Mono&display=swap" rel="stylesheet">
  <style>
    body {
      background-color: #000;
      color: #00ffcc;
      font-family: 'Share Tech Mono', monospace;
      margin: 0;
      padding: 1rem;
    }
    .terminal {
      max-width: 800px;
      margin: 0 auto;
      padding: 1rem;
      background-color: #111;
      border-radius: 10px;
      box-shadow: 0 0 20px rgba(0, 255, 204, 0.2);
      min-height: 80vh;
    }
    #terminal-output {
      max-height: 60vh;
      overflow-y: auto;
      padding-bottom: 1rem;
      white-space: pre-wrap;
    }
    #terminal input {
      background: transparent;
      border: none;
      color: #00ffcc;
      font-family: 'Share Tech Mono', monospace;
      font-size: 1rem;
      width: 90%;
      outline: none;
    }
    code {
      color: #ff003c;
    }
  </style>
</head>
<body>
  <div class="terminal" id="terminal" onclick="focusInput()">
    <div id="terminal-output">
<pre style="color:#ff003c;">
███████╗██████╗ ██╗   ██╗ ██████╗ ██████╗ ███████╗
██╔════╝██╔══██╗██║   ██║██╔════╝ ██╔══██╗██╔════╝
███████╗██████╔╝██║   ██║██║  ███╗██████╔╝█████╗  
╚════██║██╔═══╝ ██║   ██║██║   ██║██╔═══╝ ██╔══╝  
███████║██║     ╚██████╔╝╚██████╔╝██║     ███████╗
╚══════╝╚═╝      ╚═════╝  ╚═════╝ ╚═╝     ╚══════╝</pre>
      <div>Type <code>help</code> to begin.</div>
      <br>
    </div>
    <div>
      <span style="color:#00ffcc;" id="terminal-path">user@darkhost:~$</span>
      <input id="terminal-input" autofocus autocomplete="off" />
    </div>
  </div>

  <script>
    const terminalInput = document.getElementById('terminal-input');
    const terminalOutput = document.getElementById('terminal-output');
    const terminalPath = document.getElementById('terminal-path');

    const fileSystem = {
      '/': {
        'readme.txt': `Welcome, agent.\nYour access key is hidden inside the vault.\nBut the vault is locked...`,
        'hint.jpg': '[Corrupted Image Data]',
        'vault': {
          'vault.key': 'ACCESS_KEY: 7h15-15-f4k3-k3y',
          'locked.mp4': '[video file placeholder]'
        }
      }
    };

    let currentPath = '/';
    let history = [];
    let historyIndex = 0;

    function getDir(path) {
      const parts = path.split('/').filter(Boolean);
      let dir = fileSystem['/'];
      for (const part of parts) {
        dir = dir[part];
      }
      return dir;
    }

    function resolveCommand(input) {
      const args = input.split(' ');
      const cmd = args[0];

      switch (cmd) {
        case 'help':
          return `Commands: help, ls, cd, cat, clear, exit, access <key>`;

        case 'ls': {
          const dir = getDir(currentPath);
          return Object.keys(dir).join('  ');
        }

        case 'cd': {
          const target = args[1];
          if (!target) return 'cd what?';
          if (target === '..') {
            if (currentPath !== '/') {
              currentPath = currentPath.split('/').slice(0, -1).join('/') || '/';
            }
            updatePrompt();
            return '';
          }
          const dir = getDir(currentPath);
          if (dir[target] && typeof dir[target] === 'object') {
            currentPath += (currentPath === '/' ? '' : '/') + target;
            updatePrompt();
            return '';
          }
          return `No such directory: ${target}`;
        }

        case 'cat': {
          const file = args[1];
          const dir = getDir(currentPath);
          if (!dir[file]) return `No such file: ${file}`;
          if (typeof dir[file] === 'object') return `${file} is a directory.`;
          return dir[file];
        }

        case 'access': {
          const key = args[1];
          if (key === '7h15-15-f4k3-k3y') {
            return '> Access granted. Welcome back, operative.';
          } else {
            return 'Access denied.';
          }
        }

        case 'clear':
          return 'clear';

        case 'exit':
          return 'Session terminated.';

        default:
          return `'${cmd}' is not recognized. Try 'help'.`;
      }
    }

    function updatePrompt() {
      terminalPath.textContent = `user@darkhost:${currentPath}$`;
    }

    terminalInput.addEventListener('keydown', async function (e) {
      if (e.key === 'Enter') {
        const input = terminalInput.value.trim();
        if (!input) return;

        history.push(input);
        historyIndex = history.length;

        addOutput(`user@darkhost:${currentPath}$ ${input}`);
        const result = resolveCommand(input);

        if (result === 'clear') {
          terminalOutput.innerHTML = '';
        } else {
          await typeOutput(result);
        }

        terminalInput.value = '';
      }
    });

    document.addEventListener('keydown', (e) => {
      if (e.key === 'ArrowUp') {
        if (historyIndex > 0) {
          historyIndex--;
          terminalInput.value = history[historyIndex];
        }
      } else if (e.key === 'ArrowDown') {
        if (historyIndex < history.length - 1) {
          historyIndex++;
          terminalInput.value = history[historyIndex];
        } else {
          terminalInput.value = '';
        }
      }
    });

    function addOutput(text) {
      const line = document.createElement('div');
      line.innerHTML = text;
      terminalOutput.appendChild(line);
      terminalOutput.scrollTop = terminalOutput.scrollHeight;
    }

    async function typeOutput(text) {
      const line = document.createElement('div');
      terminalOutput.appendChild(line);
      for (let char of text) {
        line.innerHTML += char;
        await new Promise(res => setTimeout(res, 10));
      }
      terminalOutput.appendChild(document.createElement('br'));
      terminalOutput.scrollTop = terminalOutput.scrollHeight;
    }

    function focusInput() {
      terminalInput.focus();
    }

    window.onload = () => {
      focusInput();
      updatePrompt();
    };
  </script>
</body>
</html>
